<body class="container-color bill-show">
<div>

  <div class="d-flex page-top">
    <%= link_to "Back", split_path(@bill.split), class: "back-button standard-button white-pink-button fs-3" %>
    <%= link_to "Edit", split_bill_items_path(@bill.split, @bill), class:"standard-button white-purple-button fs-3" %>
  </div>
  <div class="container">
    <div class="bill-description">
      <h1 class="mt-3"><%= @bill.merchant %></h1>
      <h2><%= "SGD #{format('%.2f', @bill.total_amount/100.00)}" %></h2>
      <% @bill.payers.each do |payer| %>
        <div>
          <h3>Payer: <%= payer.member.given_nickname(@bill.split.user) %></h3>
        </div>
      <% end %>
    </div>
    <div class="items">
      <% @bill.items.each do |item| %>
        <div class="splits-summary-card my-3">
          <p class="item"><%= item.name %>
          <%= "X #{item.quantity}" %>
          <%= "SGD #{item.price/100.00}" %>
          </p>
          <% item.members.each do |member| %>
            <div class="d-flex mt-3">
              <i class="fa-solid fa-user fs-5"></i>
              <p class="mx-2 mt-0"><%= member.given_nickname(@bill.split.user) %></p>
              <p><%= "SGD #{format('%.2f', (item.price/100.00)/item.members.count)}" %></p>

            </div>
          <% end %>
        </div>

      <% end %>
    </div>

    <div class="splits-summary-card mt-3 mb-5">
      <%= "Taxes: SGD #{format('%.2f', @bill.taxes/100.00)}" %>
    </div>
  </div>
</div>
</body>
